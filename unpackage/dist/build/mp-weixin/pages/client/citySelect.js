(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/client/citySelect"],{"01f2":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("4872")),o=n("fba6");function s(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{hidden:!0,listCurID:"",list:[],listCur:""}},computed:{myPosition:function(){return this.$store.state.addrInfo}},onLoad:function(){this.getCityList()},onReady:function(){var e=this;t.createSelectorQuery().select(".indexBar-box").boundingClientRect((function(t){e.boxTop=t.top})).exec(),t.createSelectorQuery().select(".indexes").boundingClientRect((function(t){e.barTop=t.top})).exec()},methods:{getCur:function(t){this.hidden=!1,this.listCur=this.list[t.target.id].name},setCur:function(t){this.hidden=!0,this.listCur=this.listCur},tMove:function(t){var e=t.touches[0].clientY,n=this.boxTop,i=this;if(e>n){var o=parseInt((e-n)/20);this.listCur=i.list[o].name}},tStart:function(){this.hidden=!1},tEnd:function(){this.hidden=!0,this.listCurID=this.listCur},indexSelect:function(t){for(var e=this,n=this.barHeight,i=this.list,o=Math.ceil(i.length*t.detail.y/n),s=0;s<i.length;s++)if(o<s+1)return e.listCur=i[s].index,e.movableY=20*s,!1},getCityList:function(){var e=this;this.request("/store/city").then((function(n){if(0==n.resultCode){for(var i=n.data,o=[],s=Object.keys(i),a=0;a<s.length;a++)o.push({name:s[a],list:i[s[a]]});e.list=o}else t.showToast({title:n.resultMsg?n.resultMsg:"网络异常,请稍后重试",icon:"none"})}))},getLocation:function(){var e=this;t.getLocation({type:"gcj02",success:function(n){var s=new i.default.AMapWX({key:o.Config.mapKey});s.getRegeo({location:n.longitude+","+n.latitude,success:function(i){t.showToast({title:"定位成功",icon:"success"});var o={lonlat:[n.longitude,n.latitude],name:i[0].desc,adress:i[0].regeocodeData.formatted_address,province:i[0].regeocodeData.addressComponent.province,cityCode:i[0].regeocodeData.addressComponent.adcode};e.$store.commit("SET_ADDRESS",o)},fail:function(e){t.showToast({title:"定位失败"})}})}})},selectCity:function(e){var n=getCurrentPages(),i=n[n.length-2];i&&(i.$vm.selectCityInfo=e),t.navigateBack({delta:1})},selectCurrentCity:function(t){var e={centralPoint:t.lonlat.join(","),code:t.cityCode,name:t.province};this.selectCity(e)}}};e.default=a}).call(this,n("543d")["default"])},"07a8":function(t,e,n){},2176:function(t,e,n){"use strict";n.r(e);var i=n("bb8a"),o=n("4f44");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("903c"),n("9172");var a,c=n("f0c5"),r=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=r.exports},"4f44":function(t,e,n){"use strict";n.r(e);var i=n("01f2"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},"8d31":function(t,e,n){"use strict";(function(t){n("f318");i(n("66fd"));var e=i(n("2176"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"903c":function(t,e,n){"use strict";var i=n("07a8"),o=n.n(i);o.a},9172:function(t,e,n){"use strict";var i=n("a3b4"),o=n.n(i);o.a},a3b4:function(t,e,n){},bb8a:function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}))}},[["8d31","common/runtime","common/vendor"]]]);