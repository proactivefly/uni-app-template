(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/feedback/feedback"],{"2d75":function(e,t,n){},"50cb":function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,i=(e._self._c,n("499a"));e._isMounted||(e.e0=function(t){e.lookImg=!1}),e.$mp.data=Object.assign({},{$root:{m0:i}})},a=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},a6e9:function(e,t,n){"use strict";n.r(t);var i=n("50cb"),o=n("c002");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("eaf7");var r,s=n("f0c5"),f=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=f.exports},c002:function(e,t,n){"use strict";n.r(t);var i=n("e687"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},c06d:function(e,t,n){"use strict";(function(e){n("f318");i(n("66fd"));var t=i(n("a6e9"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},e687:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("ee25"),o={data:function(){return{text:"",feedbackTypeIdx:"",questionList:[{name:"信息咨询类",id:1},{name:"改善建议类",id:2},{name:"服务投诉类",id:3},{name:"质量投诉类",id:4},{name:"违规违纪类",id:5}],paramsInfo:{orderId:"",feedbackType:"",problem:"",attUrls:""},affixList:[],btnDisabled:!1,relativeOrderInfo:{},fromType:1,userInfo:{},lookImg:!1,currentImgUrl:""}},methods:{orderChange:function(e){var t=e.detail.value;this.feedbackTypeIdx=t,this.paramsInfo.feedbackType=this.questionList[this.feedbackTypeIdx].id},getDefaultOrderInfo:function(){var t=this;this.request("/feedBack/impliedOrder").then((function(n){0==n.resultCode?t.relativeOrderInfo=n.data:e.showToast({title:n.resultMsg?n.resultMsg:"网络异常,请稍后重试",icon:"none"})}))},relativeOrder:function(){var e="/pages/feedback/relativeOrder";this.relativeOrderInfo.orderId&&(e+="?orderId="+this.relativeOrderInfo.orderId),this.perfectNavigateTo({url:e})},takePicture:function(){var t=this;e.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(n){for(var o=n.tempFilePaths,a=0;a<o.length;a++)(function(n){e.showLoading(),e.uploadFile({url:getApp().globalData.requestUrl+"/common/upload",filePath:o[n],name:"upFile",header:{"content-type":"multipart/form-data","service-code":"QDMS",ticket:JSON.parse(e.getStorageSync("token")).value},success:function(e){var n=JSON.parse(e.data),o=n.data;t.affixList.push({openUrl:(0,i.http2Https)(o.openUrl),fileId:o.fileId}),t.affixBtnDisabled=!1},complete:function(t){e.hideLoading()}})})(a)}})},lookAffix:function(t){if("VOG-AL00"==this.mobileModel)this.currentImgUrl=t.openUrl,this.lookImg=!0;else{var n=[];this.affixList.forEach((function(e){n.push(e.openUrl)})),e.showLoading(),e.previewImage({current:t.openUrl,urls:n,longPressActions:{itemList:["发送给朋友","保存图片","收藏"]},fail:function(e){this.currentImgUrl=t.openUrl,this.lookImg=!0},complete:function(){e.hideLoading()}})}},deleteFile:function(t){var n=this;this.request("/common/deleteFile",{fileId:t.fileId}).then((function(i){if(0==i.resultCode){for(var o=n.affixList,a=0;a<o.length;a++)if(t.fileId==o[a].fileId){n.affixList.splice(a,1);break}n.affixList.length<=0&&(n.affixBtnDisabled=!0)}else e.showToast({title:i.resultMsg?i.resultMsg:"网络异常,请稍后重试",icon:"none"})}))},feedback:function(){var t=[],n="/feedBack/staffFeedBack";if(this.affixList.forEach((function(e){t.push(e.openUrl)})),this.paramsInfo.attUrls=String(t),3==this.userInfo.type){if(n="/feedBack/meberFeedBack",this.paramsInfo.orderId=this.relativeOrderInfo.orderId,!this.paramsInfo.orderId)return void e.showToast({title:"请关联订单",icon:"none"})}else delete this.paramsInfo.orderId;this.paramsInfo.feedbackType?!this.paramsInfo.problem||this.paramsInfo.problem.length<10?e.showToast({title:"请描述您反馈的问题，最少10个字，最多500字",icon:"none"}):4!=this.feedbackTypeIdx||this.paramsInfo.attUrls?(this.btnDisabled=!0,this.request(n,this.paramsInfo).then((function(t){0==t.resultCode?e.showToast({title:t.resultMsg,icon:"success",success:function(){setTimeout((function(){e.navigateBack({delta:1})}),1500)}}):e.showToast({title:t.resultMsg?t.resultMsg:"网络异常,请稍后重试",icon:"none"})}))):e.showToast({title:"请上传违规违纪凭证",icon:"none"}):e.showToast({title:"请选择您要反馈的问题类型",icon:"none"})}},onLoad:function(){var t=JSON.parse(e.getStorageSync("userInfo"));this.userInfo=t,3==t.type&&this.getDefaultOrderInfo()}};t.default=o}).call(this,n("543d")["default"])},eaf7:function(e,t,n){"use strict";var i=n("2d75"),o=n.n(i);o.a}},[["c06d","common/runtime","common/vendor"]]]);