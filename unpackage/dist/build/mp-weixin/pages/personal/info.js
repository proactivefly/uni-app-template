(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personal/info"],{"0caf":function(t,e,n){"use strict";(function(t){n("f318");i(n("66fd"));var e=i(n("2002"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},2002:function(t,e,n){"use strict";n.r(e);var i=n("8ac1"),a=n("8554");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("8a4e"),n("d330");var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=u.exports},"6b26":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("09f1")),a=r(n("0f82")),o=r(n("874c")),s=n("ee25");function r(t){return t&&t.__esModule?t:{default:t}}var u={data:function(){return{role:"staff",bg:i.default,StatusBar:this.StatusBar,CustomBar:this.CustomBar,hasLogin:!1,userInfo:{staffType:0},waitOrderNum:0,feedBackNum:0,loginType:[{name:"购车用户注册/登录",url:"../../static/client_login.png",type:3},{name:"员工登录",url:"../../static/staff_login.png",type:2},{name:"管理员登录",url:"../../static/admin_login.png",type:1}],titlePosition:"center",action:!1,readMeUrl:null,adminNum:0}},methods:{goAuth:function(t){this.perfectNavigateTo({url:"/pages/personal/authorization?roleType="+t.type})},getAdminNum:function(){var t=this;this.request("/order/admin/deptfinishordernum").then((function(e){t.adminNum=e.data}))},lookReadMe:function(){var e={url:this.readMeUrl,title:"常见问题"};t.setStorageSync("webViewInfo",e),this.perfectNavigateTo({url:"/pages/webView/webView"})},editUserInfo:function(){this.perfectNavigateTo({url:"/pages/personal/register?fromType=2"})},changeRole:function(t){1==t?(this.bg=o.default,this.role="admin",this.getWaitOrderNum(),this.getAdminNum(),this.getFeedBackNum(),this.getReadMe("admin_operation_guide")):2==t?(this.bg=i.default,this.role="staff",this.getReadMe("staff_operation_guide")):(this.bg=a.default,this.role="client")},goPage:function(t){this.perfectNavigateTo({url:t})},getWaitOrderNum:function(){var e=this;this.request("/order/admin/orders",{isTreated:0}).then((function(n){if(0==n.resultCode){var i=n.data;e.waitOrderNum=i.length}else t.showToast({title:n.resultMsg?n.resultMsg:"网络异常,请稍后重试",icon:"none"})}))},getFeedBackNum:function(){var e=this;this.request("/feedBack/feedBacklist",{pageNum:1,pageSize:99}).then((function(n){if(0==n.resultCode){var i=n.data.page.list,a=0;i.forEach((function(t){0==t.state&&a++})),e.feedBackNum=a}else t.showToast({title:n.resultMsg?n.resultMsg:"网络异常,请稍后重试",icon:"none"})}))},controlProgress:function(t){this.perfectNavigateTo({url:"".concat(t,"?userId=").concat(this.userInfo.userId)})},getReadMe:function(t){var e=this;this.request("/common/param",{key:t}).then((function(t){t.data&&(e.readMeUrl=(0,s.http2Https)(t.data))}))},backLogin:function(){var e=this;t.showModal({title:"提示",content:"确认退出当前账号吗？",success:function(n){n.confirm&&e.request("/user/logOut").then((function(n){1008==n.resultCode?(t.removeStorageSync("token"),t.removeStorageSync("userInfo"),e.hasLogin=!1):t.showToast({title:n.resultMsg?n.resultMsg:"网络异常，请稍后重试",icon:"none"})}))}})},checkLogin:function(){var e,n=t.getStorageSync("token");n?(e=JSON.parse(n),this.getUserInfo(),this.hasLogin=!0,this.changeRole(e.userType)):this.hasLogin=!1},getUserInfo:function(){var e=this;this.request("/user/info").then((function(n){0==n.resultCode?(e.userInfo=n.data,t.setStorageSync("userInfo",JSON.stringify(e.userInfo))):t.showToast({title:n.resultMsg?n.resultMsg:"网络异常,请稍后重试",icon:"none"})}))}},onShow:function(t){this.changeRole(),this.checkLogin(),"android"==this.systemType?this.titlePosition="left":this.titlePosition="center"},onShareAppMessage:function(){return{title:"卫蓝购",path:"/pages/infomation/index",imageUrl:"/static/share.png"}},onLoad:function(){this.action=!0}};e.default=u}).call(this,n("543d")["default"])},"6b85":function(t,e,n){},8554:function(t,e,n){"use strict";n.r(e);var i=n("6b26"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"8a4e":function(t,e,n){"use strict";var i=n("6b85"),a=n.n(i);a.a},"8ac1":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},aa2c:function(t,e,n){},d330:function(t,e,n){"use strict";var i=n("aa2c"),a=n.n(i);a.a}},[["0caf","common/runtime","common/vendor"]]]);