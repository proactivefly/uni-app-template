{"version":3,"sources":["uni-app:///main.js","webpack:///E:/X/Bjev-dev/html/touch/qdms/pages/client/searchShop.vue?0a98","webpack:///E:/X/Bjev-dev/html/touch/qdms/pages/client/searchShop.vue?4be4","webpack:///E:/X/Bjev-dev/html/touch/qdms/pages/client/searchShop.vue?6310","webpack:///E:/X/Bjev-dev/html/touch/qdms/pages/client/searchShop.vue?1664","uni-app:///pages/client/searchShop.vue","webpack:///E:/X/Bjev-dev/html/touch/qdms/pages/client/searchShop.vue?ae01","webpack:///E:/X/Bjev-dev/html/touch/qdms/pages/client/searchShop.vue?25a5"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,wG;AACAA,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACwC;;;AAGjG;AACqN;AACrN,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAi2B,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiEr3B;;;AAGA;AACA,iE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,SADA,EAEA,QAFA,EAGA,UAHA,EAGA;AACA,wBACA,aADA,EACA;AACA,kBAFA,EAGA,gBAHA,EAIA,gBAJA,EAKA,mBALA,EAMA,QANA,EAOA,SAPA,EAOA;AACA,iBARA,EAQA;AACA,sBATA,EASA;AACA,uBAVA,EAUA;AACA,iBAXA,EAJA,EAiBA,WAjBA,EAiBA;AACA,wBACA,kBADA,EACA;AACA,kBAFA,EAEA;AACA,kBAHA,CAGA;AAHA,OAlBA,EAuBA,mBAvBA,EAwBA,oBACA,QADA,EAEA,QAFA,EAGA,UAHA,EAGA;AACA,sBAJA,EAIA;AACA,oBALA,EAxBA,EA+BA,YA/BA,EAgCA,eAhCA,EAiCA,gBAjCA,CAiCA;AAjCA,MAmCA,CArCA,EAsCA,YACA,UADA,wBACA,CACA,kCACA,CAHA,EAtCA,EA2CA,WACA,SADA,qBACA,CADA,EACA,CACA,kCACA,+CACA,sCACA,gBADA,CACA;AACA,yBAFA,CAEA;AACA,OAHA,EAIA,mCACA,oCACA,mCACA,CAXA,EAYA,OAZA,qBAYA,CACA,mBACA,6CADA,EAEA,8CAFA,EAGA,8BAHA,EAIA,oCAJA,EAKA,gCACA,iBACA,CAPA,IASA,CAtBA,EAuBA,aAvBA,2BAuBA;AACA,uBACA,+BACA,iCACA,CAFA,MAEA,oCACA,sCACA,CAFA,MAEA,CACA,WACA,CACA,yBACA,4DADA,IAGA,CAnCA,EAoCA,OApCA,qBAoCA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;;AAOA,KA5CA;AA6CA,eA7CA,yBA6CA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KArDA;AAsDA,iBAtDA,2BAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA,CACA;AACA,iCAFA,CAEA;AACA,eAHA;AAIA;AACA;AACA;AACA;AACA;AACA,SAjCA,MAiCA;AACA;AACA;AACA,OAtCA;AAuCA,KA9FA;AA+FA,cA/FA,wBA+FA;AACA;AACA,uCADA;;AAGA,KAnGA;AAoGA,uBApGA,iCAoGA;AACA;AACA;AACA;AACA,mBADA,EACA;AACA,4BAFA,EAEA;AACA,6BAHA,EAGA;AACA,yCAJA,EAIA;AACA,mBALA,EAKA;AACA,oBANA,EAMA;AACA,iCAPA,CAOA;AAPA;AASA,OAVA;AAWA;AACA;AACA,4BADA;AAEA,kCAFA;;AAIA,KAtHA;AAuHA,cAvHA,wBAuHA,EAvHA;AAwHA,WAxHA,qBAwHA;AACA;AACA,KA1HA;AA2HA,eA3HA,yBA2HA;AACA;AACA,qBADA;AAEA;AACA;AACA,qCADA;;AAGA;AACA,wDADA;AAEA;AACA;AACA;AACA;AACA,qDADA;AAEA,kCAFA;AAGA,+DAHA;AAIA,yEAJA;AAKA,mCALA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAnBA;AAoBA;AACA,sDADA,CACA;AACA;AACA,aAvBA;;AAyBA,SA/BA;;AAiCA,KA7JA;AA8JA,aA9JA,uBA8JA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,kDADA;AAEA,iDAFA;;AAIA,SANA;AAOA,OARA,MAQA;AACA;AACA;AACA,KA9KA,EA3CA;;AA2NA;AACA;AACA;AACA;AACA;AACA,KALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,KAZA;AAaA;AACA;AACA,KAfA,EA3NA;;AA4OA,QA5OA,oBA4OA;AACA;AACA;AACA,GA/OA,E;;;;;;;;;;;;;ACtEA;AAAA;AAAA;AAAA;AAA6kD,CAAgB,i6CAAG,EAAC,C;;;;;;;;;;;ACAjmD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/client/searchShop.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/client/searchShop.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./searchShop.vue?vue&type=template&id=6f70554e&scoped=true&\"\nvar renderjs\nimport script from \"./searchShop.vue?vue&type=script&lang=js&\"\nexport * from \"./searchShop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./searchShop.vue?vue&type=style&index=0&id=6f70554e&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f70554e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/client/searchShop.vue\"\nexport default component.exports","export * from \"-!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchShop.vue?vue&type=template&id=6f70554e&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchShop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchShop.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"wrapper\">\r\n\t\t<map \r\n\t\t\tid=\"map\"\r\n\t\t\t:longitude=\"center[0]\" \r\n\t\t\t:latitude=\"center[1]\" \r\n\t\t\t:scale=\"defaultScale\" \r\n\t\t\t@markertap=\"markertap\"\r\n\t\t\tshow-location\r\n\t\t\tlayer-style=\"3\" \r\n\t\t\t:subkey=\"Config.mapStyleKey\" \r\n\t\t\tclass=\"map\"\r\n\t\t\t:markers=\"markers\"\r\n\t\t>\r\n\t\t\t<!-- 居中位置 -->\r\n\t\t\t<view class='mylocation' @click=\"mapcenter\">\r\n\t\t\t\t<image src=\"../../static/get_location.png\" class='location'></image>\r\n\t\t\t</view>\r\n\t\t</map>\r\n\t\t<!-- 搜索框 -->\r\n\t\t<view class=\"search\">\r\n\t\t\t<view class=\"city text-ellipsis flex-row-start\" @click=\"selectCity\">\r\n\t\t\t\t<text v-if=\"selectCityInfo.name\">{{selectCityInfo.name}}</text>\r\n\t\t\t\t<text v-else-if=\"currentPosition.province\">{{currentPosition.province}}</text>\r\n\t\t\t\t<text v-else>请选择</text>\r\n\t\t\t\t<image src=\"../../static/down_arrow.png\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"image_w flex-row-center\">\r\n\t\t\t\t<image src=\"../../static/search_black.png\"></image>\r\n\t\t\t</view>\r\n\t\t\t<input type=\"text\" placeholder=\"请选择4s店\" v-model=\"searchShopParams.name\" class=\"input\" disabled @click=\"goSelect4Shop\">\r\n\t\t\t<view class=\"image_w flex-row-center\">\r\n\t\t\t\t<image src=\"../../static/clear_black.png\" @click=\"clear\" class=\"delete\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"adress_result\">\r\n\t\t\t<scroll-view :scroll-y=\"false\" class='scroll_view'>\r\n\t\t\t\t<view class=\"list padding\" v-if=\"currentPosition.name || selectCityInfo.name\">\r\n\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t<view class=\"info flex-row-end\" @click=\"openMap\">\r\n\t\t\t\t\t\t\t<view class=\"km\">{{distance}}km</view>\r\n\t\t\t\t\t\t\t<view class=\"arrow\">\r\n\t\t\t\t\t\t\t\t<image src=\"../../static/gps.png\" class='gps'></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"name text-ellipsis\">{{selectShopInfo.name}}</view>\r\n\t\t\t\t\t\t<view class=\"bedge\"><text>汽车销售</text></view>\r\n\t\t\t\t\t\t<view class=\"adress\">{{selectShopInfo.address}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else class='no_ padding'>\r\n\t\t\t\t\t<block v-if=\"!currentPosition.name\">\r\n\t\t\t\t\t\t未获取您的城市信息，您可以移动地图/切换城市/查询搜索经销商。您也可以<text class='s' @click=\"openSet\">设置授权位置信息</text>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 有当前定位，但没4s店 -->\r\n\t\t\t\t\t<block v-if=\"currentPosition.name && !selectShopInfo.name\" >\r\n\t\t\t\t\t\t该城市暂无经销商，您可以移动地图/切换城市/查询搜索经销商\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tConfig\r\n\t} from \"../../common/Const.js\"\r\n\timport amapFile from 'common/amap-wx.js'\r\n\timport {Tdistance} from \"../../common/tools.js\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmap: null,\r\n\t\t\t\tname: '',\r\n\t\t\t\tcenter: [], //地图中心\r\n\t\t\t\tselectShopInfo: {\r\n\t\t\t\t\taddress:null,// \"普洱市思茅区普洱路中段思南汽车城斜对面\"\r\n\t\t\t\t\tcity:null,\r\n\t\t\t\t\tcreateTime:null,\r\n\t\t\t\t\tdeleteFlag: null,\r\n\t\t\t\t\tgaodeCitycode: null,\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t\tlat:null, //\"22.800035\"\r\n\t\t\t\t\tlon:null, // \"100.976474\"\r\n\t\t\t\t\tprovince:null, // 530000\r\n\t\t\t\t\tshortName: null, //\"普洱邦龙\"\r\n\t\t\t\t\ttel: null\r\n\t\t\t\t},\r\n\t\t\t\tmarkers: [],//4s店数组\r\n\t\t\t\tselectCityInfo:{\r\n\t\t\t\t\tcentralPoint:null, //\"116.405285,39.904989\"\r\n\t\t\t\t\tcode:null,// \"110100\"\r\n\t\t\t\t\tname: null,// \"110100\"\r\n\t\t\t\t},\r\n\t\t\t\tcurrentPosition:{},\r\n\t\t\t\tsearchShopParams:{\r\n\t\t\t\t\tname:\"\",\r\n\t\t\t\t\tcity:\"\",\r\n\t\t\t\t\tpageNum:1,//当前页数\tInteger\t是\t\r\n\t\t\t\t\tpageSize:1000,//\r\n\t\t\t\t\tqueryType:1\r\n\t\t\t\t},\r\n\t\t\t\tshopList:[],\r\n\t\t\t\tdistance:'- -',\r\n\t\t\t\tdefaultScale:16 //默认缩放级别\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tmyPosition(){\r\n\t\t\t\treturn this.$store.state.addrInfo\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tmarkertap(e) {\r\n\t\t\t\tlet _markerId=e.detail.markerId\r\n\t\t\t\tthis.selectShopInfo=this.shopList[_markerId]\r\n\t\t\t\tthis.markers.forEach((item)=>{\r\n\t\t\t\t\titem.width=52//\t标注图标宽度\tnumber/string\t否\t默认为图片实际宽度\t\r\n\t\t\t\t\titem.height=54//\r\n\t\t\t\t})\r\n\t\t\t\tthis.markers[_markerId].width=82\r\n\t\t\t\tthis.markers[_markerId].height=84\r\n\t\t\t\tthis.markers[_markerId].zIndex=2\r\n\t\t\t},\r\n\t\t\topenMap() {\r\n\t\t\t\tuni.openLocation({\r\n\t\t\t\t\tlatitude:parseFloat(this.selectShopInfo.lat),\r\n\t\t\t\t\tlongitude:parseFloat(this.selectShopInfo.lon),\r\n\t\t\t\t\tname:this.selectShopInfo.name,\r\n\t\t\t\t\taddress:this.selectShopInfo.address,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoSelect4Shop() { // 传入选择的城市编码\r\n\t\t\t\tvar _code=null\r\n\t\t\t\tif(this.selectCityInfo.code){\r\n\t\t\t\t\t_code=this.selectCityInfo.code\r\n\t\t\t\t}else if(this.currentPosition.cityCode){\r\n\t\t\t\t\t_code=this.currentPosition.cityCode\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_code=''\r\n\t\t\t\t}\r\n\t\t\t\tthis.perfectNavigateTo({\r\n\t\t\t\t\turl: \"/pages/fourShop/fourShop?fromPage=3&cityCode=\"+_code\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenSet(){\r\n\t\t\t\tuni.openSetting({\r\n\t\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\t\tif(res.authSetting[\"scope.userLocation\"]){\r\n\t\t\t\t\t\t\tthis.getLocation()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetDistance(){\r\n\t\t\t\tvar shopLon=this.selectShopInfo.lon\r\n\t\t\t\tvar shopLat=this.selectShopInfo.lat\r\n\t\t\t\tif(this.myPosition.lonlat.length==2 && shopLon && shopLat){\r\n\t\t\t\t\tthis.distance=Tdistance(this.myPosition.lonlat,[shopLon,shopLat])\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({title:'距离获取失败',icon:'none'})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetShopPiCity(){ // 每次切换城市时调用\r\n\t\t\t\tthis.request(\"/store/list\",this.searchShopParams).then((res)=>{\r\n\t\t\t\t\tlet _data=res.data\r\n\t\t\t\t\tif(res.resultCode==0){\n\t\t\t\t\t\t// 剔除无经纬度4s店\n\t\t\t\t\t\tvar _lshop=[]\n\t\t\t\t\t\t_data.list.forEach((item,index)=>{\n\t\t\t\t\t\t\tif(item.lon && item.lat){\n\t\t\t\t\t\t\t\t_lshop.push(item)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.shopList=_lshop\n\t\t\t\t\t\t// console.log(this.shopList)\r\n\t\t\t\t\t\tthis.setShopListToMarker()\r\n\t\t\t\t\t\t// 如果有最近距离  计算最近城市,取最大值\r\n\t\t\t\t\t\tvar distanceList=[]\n\t\t\t\t\t\tif(this.myPosition.lonlat.length>=2){\r\n\t\t\t\t\t\t\tthis.shopList.forEach((item,index)=>{\n\t\t\t\t\t\t\t\tvar _distance=Tdistance(this.myPosition.lonlat,[item.lon,item.lat])\n\t\t\t\t\t\t\t\tdistanceList.push(_distance)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tvar _min=Math.min(...distanceList)\r\n\t\t\t\t\t\t\tvar _Idx=distanceList.indexOf(_min)\r\n\t\t\t\t\t\t\tif(_Idx>=0){\r\n\t\t\t\t\t\t\t\tthis.selectShopInfo=this.shopList[_Idx]\r\n\t\t\t\t\t\t\t\tthis.distance=_min\r\n\t\t\t\t\t\t\t\t// 设置当前marker选中\r\n\t\t\t\t\t\t\t\tthis.markers.forEach((item)=>{\r\n\t\t\t\t\t\t\t\t\titem.width=52//\t标注图标宽度\tnumber/string\t否\t默认为图片实际宽度\t\r\n\t\t\t\t\t\t\t\t\titem.height=54//\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.markers[_Idx].width=82\r\n\t\t\t\t\t\t\t\tthis.markers[_Idx].height=84\r\n\t\t\t\t\t\t\t\tthis.markers[_Idx].zIndex=2\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showToast({title:res.resultMsg?res.resultMsg:'网络异常,请稍后重试',icon:'none'})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tselectCity() {\r\n\t\t\t\tthis.perfectNavigateTo({\r\n\t\t\t\t\turl: \"/pages/client/citySelect\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetShopListToMarker(){\r\n\t\t\t\tvar _marker=[]\r\n\t\t\t\tthis.shopList.forEach((item,index)=>{\n\t\t\t\t\t_marker.push({\r\n\t\t\t\t\t\tid:index,//\t标记点 id\tnumber\t否\tmarker 点击事件回调会返回此 id。\r\n\t\t\t\t\t\tlatitude:item.lat,//\t纬度\tnumber\t是\t浮点数，范围 -90 ~ 90\t\r\n\t\t\t\t\t\tlongitude:item.lon,//\t经度\tnumber\t是\t浮点数，范围 -180 ~ 180\t\r\n\t\t\t\t\t\ticonPath:'/static/4spoint.png',//\r\n\t\t\t\t\t\twidth:52,//\t标注图标宽度\tnumber/string\t否\t默认为图片实际宽度\t\r\n\t\t\t\t\t\theight:54,//\t标注图标高度\tnumber/string\t否\t默认为图片实际高度\t\r\n\t\t\t\t\t\tanchor:{x:.5,y:1}//\t经纬度在标注图标的锚点，，x 表示横向(0-1)，y 表示竖向(0-1)。{x: .5, y: 1} 表示底边中点\t1.2.0\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tthis.markers=_marker\r\n\t\t\t\tthis.map.includePoints({\r\n\t\t\t\t\tpoints: this.markers,\r\n\t\t\t\t\tpadding: [50, 50, 200, 50]\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcontroltap() {},\r\n\t\t\tinitMap() {\r\n\t\t\t\tthis.map = uni.createMapContext(\"map\")\r\n\t\t\t},\r\n\t\t\tgetLocation() {\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tvar myAmapFun = new amapFile.AMapWX({\r\n\t\t\t\t\t\t\tkey: Config.mapKey\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmyAmapFun.getRegeo({\r\n\t\t\t\t\t\t\tlocation: res.longitude + \",\" + res.latitude,\r\n\t\t\t\t\t\t\tsuccess:(data)=>{\r\n\t\t\t\t\t\t\t\t// console.log(\"定位点\",data)\r\n\t\t\t\t\t\t\t\tlet _cityCode=data[0].regeocodeData.addressComponent.adcode\r\n\t\t\t\t\t\t\t\tlet _obj = {\r\n\t\t\t\t\t\t\t\t\tlonlat: [res.longitude, res.latitude],\r\n\t\t\t\t\t\t\t\t\tname:data[0].desc,\r\n\t\t\t\t\t\t\t\t\tadress:data[0].regeocodeData.formatted_address,\r\n\t\t\t\t\t\t\t\t\tprovince:data[0].regeocodeData.addressComponent.province,\r\n\t\t\t\t\t\t\t\t\tcityCode:_cityCode\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.currentPosition=_obj\r\n\t\t\t\t\t\t\t\t// 默认把当前城市选为 选择的城市\r\n\t\t\t\t\t\t\t\tthis.$store.commit(\"SET_ADDRESS\", _obj)\r\n\t\t\t\t\t\t\t\tthis.center=this.currentPosition.lonlat\r\n\t\t\t\t\t\t\t\t//获取定位城市的 4s店地址\r\n\t\t\t\t\t\t\t\tthis.searchShopParams.city=this.currentPosition.cityCode\r\n\t\t\t\t\t\t\t\tthis.getShopPiCity()\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail:()=>{ //无坐标\r\n\t\t\t\t\t\t\t\tthis.searchShopParams.city='110100' //默认北京\r\n\t\t\t\t\t\t\t\tthis.getShopPiCity()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmapcenter() {\r\n\t\t\t\t/* this.map.includePoints({\r\n\t\t\t\t\tpoints: this.markers,\r\n\t\t\t\t\tpadding: [50, 50, 200, 50]\r\n\t\t\t\t}) */\r\n\t\t\t\tif(this.$store.state.addrInfo.lonlat){ //有位置\r\n\t\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\t\tthis.defaultScale=16\r\n\t\t\t\t\t\tthis.map.moveToLocation({\r\n\t\t\t\t\t\t\tlongitude: this.myPosition.lonlat[0],\r\n\t\t\t\t\t\t\tlatitude: this.myPosition.lonlat[1],\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{ //打开授权\r\n\t\t\t\t\tthis.openSet()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tselectShopInfo: function(newValue, oldValue){\r\n\t\t\t\tconsole.log(\"选择的4s店\",newValue)\r\n\t\t\t\tthis.center=[newValue.lon,newValue.lat]\r\n\t\t\t\tthis.getDistance()\r\n\t\t\t},\r\n\t\t\tselectCityInfo:function(newValue,oldValue){\r\n\t\t\t\tif(newValue.centralPoint){\r\n\t\t\t\t\tthis.center =newValue.centralPoint.split(\",\")\r\n\t\t\t\t\tthis.searchShopParams.city=newValue.code\r\n\t\t\t\t\tthis.getShopPiCity()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshopList:function(newValue){\r\n\t\t\t\t// this.setShopListToMarker()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(){\r\n\t\t\tthis.getLocation()\r\n\t\t\tthis.initMap()\r\n\t\t},\r\n\t}\r\n</script>\n<style lang=\"stylus\" scoped>\r\n  .wrapper\n    .map\n      width:100%\n      height:98vh\r\n\t\t\t.mylocation\r\n\t\t\t\tbackground:#fff\r\n\t\t\t\tposition:absolute\r\n\t\t\t\tright:30upx\r\n\t\t\t\tbottom:30vh\r\n\t\t\t\tpadding:16upx\r\n\t\t\t\tbox-shadow:0px 0px 20upx 0upx rgba(135,138,183,0.2);\r\n\t\t\t\tborder-radius:8upx;\r\n\t\t\t\t.location\r\n\t\t\t\t\twidth:48upx\r\n\t\t\t\t\theight:48upx\r\n\t\t.search\r\n\t\t\tdisplay:flex\r\n\t\t\tflex-direction row\r\n\t\t\talign-items center\r\n\t\t\tposition:absolute;\r\n\t\t\ttop:30upx\r\n\t\t\tbox-shadow:0px 0px 20upx 0upx rgba(135,138,183,0.2);\r\n\t\t\tleft:50%\r\n\t\t\twidth:710upx\r\n\t\t\tpadding-left:30upx\r\n\t\t\ttransform translateX(-50%)\r\n\t\t\theight:96upx;\r\n\t\t\tcolor:#1F2334\r\n\t\t\tbackground:rgba(255,255,255,1);\r\n\t\t\tborder-radius:16upx;\r\n\t\t\t.city\r\n\t\t\t\tpadding-right:30upx\r\n\t\t\t\tborder-right:2upx solid #E3E9F0\r\n\t\t\t\timage\r\n\t\t\t\t\twidth:28upx\r\n\t\t\t\t\theight:28upx\r\n\t\t\t\t\tmargin-left:10upx\r\n\t\t\t.input\r\n\t\t\t\tflex:1\r\n\t\t\t\tfont-size 32upx\r\n\t\t\t.image_w\r\n\t\t\t\twidth:100upx\r\n\t\t\t\theight:50upx\r\n\t\t\t\timage\r\n\t\t\t\t\twidth:28upx\r\n\t\t\t\t\theight:28upx\r\n\t\t.adress_result\r\n\t\t\theight:25vh\r\n\t\t\tposition:absolute\r\n\t\t\tbackground:rgba(255,255,255,1);\r\n\t\t\tborder-radius:24upx 24upx 0px 0px;\r\n\t\t\tbottom:0upx\r\n\t\t\tleft:0upx\r\n\t\t\twidth:750upx\r\n\t\t\t.scroll_view\r\n\t\t\t\theight:100%\r\n\t\t\t.list\r\n\t\t\t\tmargin-top:37upx\r\n\t\t\t\t.item\r\n\t\t\t\t\tfont-size:24upx;\r\n\t\t\t\t\tposition:relative\r\n\t\t\t\t\tfont-family:PingFangSC-Regular,PingFang SC;\r\n\t\t\t\t\tfont-weight:400;\r\n\t\t\t\t\tcolor:rgba(100,100,100,1);\r\n\t\t\t\t\t.info\r\n\t\t\t\t\t\tposition:absolute\r\n\t\t\t\t\t\tright:0upx\r\n\t\t\t\t\t\ttop:97upx\r\n\t\t\t\t\t\t.arrow\r\n\t\t\t\t\t\t\twidth:76upx;\r\n\t\t\t\t\t\t\theight:44upx;\r\n\t\t\t\t\t\t\tbackground:rgba(241,242,245,1);\r\n\t\t\t\t\t\t\tborder-radius:8upx;\r\n\t\t\t\t\t\t\tdisplay:flex\r\n\t\t\t\t\t\t\tflex-direction row\r\n\t\t\t\t\t\t\talign-items center\r\n\t\t\t\t\t\t\tjustify-content center\r\n\t\t\t\t\t\t\t.gps\r\n\t\t\t\t\t\t\t\twidth:28upx\r\n\t\t\t\t\t\t\t\theight:28upx\r\n\t\t\t\t\t\t.km\r\n\t\t\t\t\t\t\tcolor:#1F2334\r\n\t\t\t\t\t\t\tmargin-right:20upx\r\n\t\t\t\t\t&:not(:first-child){\r\n\t\t\t\t\t\tmargin-top:30upx\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.name\r\n\t\t\t\t\t\tfont-size:32upx;\r\n\t\t\t\t\t\tfont-family:PingFangSC-Medium,PingFang SC;\r\n\t\t\t\t\t\tfont-weight:500;\r\n\t\t\t\t\t\tcolor:rgba(30,30,30,1);\r\n\t\t\t\t\t.bedge\r\n\t\t\t\t\t\tmargin-top:16upx\r\n\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\theight:40upx;\r\n\t\t\t\t\t\t\tbackground:rgba(53,183,163,1);\r\n\t\t\t\t\t\t\tborder-radius:4upx;\r\n\t\t\t\t\t\t\tfont-size:24upx;\r\n\t\t\t\t\t\t\tfont-family:PingFangSC-Medium,PingFang SC;\r\n\t\t\t\t\t\t\tfont-weight:500;\r\n\t\t\t\t\t\t\tcolor:rgba(255,255,255,1);\r\n\t\t\t\t\t\t\tline-height:40upx;\r\n\t\t\t\t\t\t\tpadding:0upx 10upx\r\n\t\t\t\t\t.adress\r\n\t\t\t\t\t\tmargin-top:10upx\r\n\t\t\t\t\t\twidth:448upx\r\n\t\t\t\t\t\tfont-size:26upx;\r\n\t\t\t\t\t\tfont-family:PingFangSC-Regular,PingFang SC;\r\n\t\t\t\t\t\tfont-weight:400;\r\n\t\t\t\t\t\tcolor:rgba(31,35,52,1);\r\n\t\t\t\t\t\tline-height:40upx;\r\n\t\t\t\t\t.info\r\n\t\t\t\t\t\tfont-size:24upx;\r\n\t\t\t\t\t\tfont-family:PingFangSC-Regular,PingFang SC;\r\n\t\t\t\t\t\tfont-weight:400;\r\n\t\t\t\t\t\tcolor:rgba(160,160,160,1);\r\n\t\t\t\t\t\tmargin-top:10upx\r\n\t\t\t\t\t\tdisplay:flex\r\n\t\t\t\t\t\tflex-direction row\r\n\t\t\t\t\t\talign-items center\r\n\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tpadding-right:15upx\r\n\t\t\t\t\t\t\t&:not(:first-child)\r\n\t\t\t\t\t\t\t\tpadding-left:15upx\r\n\t\t\t\t\t\t\t&:not(:last-child)\r\n\t\t\t\t\t\t\t\tborder-right:1upx solid rgba(160,160,160,1);\r\n\t\t\t.no_ \r\n\t\t\t\tfont-size:28upx\r\n\t\t\t\tcolor:#333333\r\n\t\t\t\tfont-weight:500\r\n\t\t\t\ttext-align center\r\n\t\t\t\tline-height 40upx\r\n\t\t\t\tmargin-top:50upx\r\n\t\t\t\t.s\r\n\t\t\t\t\tcolor:#35B7A3\r\n</style>\n","import mod from \"-!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-2!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/stylus-loader/index.js??ref--11-oneOf-1-4!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchShop.vue?vue&type=style&index=0&id=6f70554e&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-2!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-3!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/stylus-loader/index.js??ref--11-oneOf-1-4!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--11-oneOf-1-5!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchShop.vue?vue&type=style&index=0&id=6f70554e&lang=stylus&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1595813406870\n      var cssReload = require(\"E:/迅雷下载/HBuilderX.2.8.1.20200721-alpha.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}